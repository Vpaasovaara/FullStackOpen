{"ast":null,"code":"import anecdoteService from '../services/anecdotes'; // 6.6: anekdootit, step4\n\nexport const increment = content => {\n  return async dispatch => {\n    const updatedAnecdote = await anecdoteService.update(content);\n    dispatch({\n      type: 'INCREMENT',\n      content: updatedAnecdote\n    });\n  };\n};\nexport const newAnecdote = content => {\n  return {\n    type: 'NEW_ANECDOTE',\n    content: content\n  };\n}; // 6.16 anekdootit ja backend, step4\n\nexport const initializeAnecdotes = () => {\n  return async dispatch => {\n    const anecdotes = await anecdoteService.getAll();\n    dispatch({\n      type: 'INIT_ANECDOTES',\n      content: anecdotes\n    });\n  };\n};\n\nconst anecdoteReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  //console.log('state now: ', state)\n  //console.log('action', action)\n  let copy = [...state];\n\n  switch (action.type) {\n    // 6.3: anekdootit, step1\n    case 'INCREMENT':\n      let obj = copy.find(X => X.id == action.content.id);\n      if (obj) obj = obj.votes++;\n      return copy.sort((a, b) => {\n        return b.votes - a.votes;\n      });\n    // 6.4: anekdootit, step2\n\n    case 'NEW_ANECDOTE':\n      return state.concat(action.content);\n\n    case 'INIT_ANECDOTES':\n      return action.content;\n\n    default:\n      return state;\n  }\n};\n\nexport default anecdoteReducer;","map":{"version":3,"sources":["/home/ville/koodaus/fullStackOpen/redux-anecdotes/src/reducers/anecdoteReducer.js"],"names":["anecdoteService","increment","content","dispatch","updatedAnecdote","update","type","newAnecdote","initializeAnecdotes","anecdotes","getAll","anecdoteReducer","state","action","copy","obj","find","X","id","votes","sort","a","b","concat"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,uBAA5B,C,CAGA;;AACA,OAAO,MAAMC,SAAS,GAAIC,OAAD,IAAa;AACpC,SAAO,MAAMC,QAAN,IAAkB;AACvB,UAAMC,eAAe,GAAG,MAAMJ,eAAe,CAACK,MAAhB,CAAuBH,OAAvB,CAA9B;AACAC,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAE,WADC;AAEPJ,MAAAA,OAAO,EAAEE;AAFF,KAAD,CAAR;AAID,GAND;AAOD,CARM;AAUP,OAAO,MAAMG,WAAW,GAAIL,OAAD,IAAa;AACtC,SAAO;AAAEI,IAAAA,IAAI,EAAE,cAAR;AAAwBJ,IAAAA,OAAO,EAAEA;AAAjC,GAAP;AACD,CAFM,C,CAIP;;AACA,OAAO,MAAMM,mBAAmB,GAAG,MAAM;AACvC,SAAO,MAAML,QAAN,IAAkB;AACvB,UAAMM,SAAS,GAAG,MAAMT,eAAe,CAACU,MAAhB,EAAxB;AACAP,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAE,gBADC;AAEPJ,MAAAA,OAAO,EAAEO;AAFF,KAAD,CAAR;AAID,GAND;AAOD,CARM;;AAUP,MAAME,eAAe,GAAG,YAAwB;AAAA,MAAvBC,KAAuB,uEAAf,EAAe;AAAA,MAAXC,MAAW;AAC9C;AACA;AAEA,MAAIC,IAAI,GAAG,CAAC,GAAGF,KAAJ,CAAX;;AAEA,UAAQC,MAAM,CAACP,IAAf;AACE;AACA,SAAK,WAAL;AACE,UAAIS,GAAG,GAAGD,IAAI,CAACE,IAAL,CAAUC,CAAC,IAAIA,CAAC,CAACC,EAAF,IAAQL,MAAM,CAACX,OAAP,CAAegB,EAAtC,CAAV;AACA,UAAIH,GAAJ,EAASA,GAAG,GAAGA,GAAG,CAACI,KAAJ,EAAN;AACP,aAAOL,IAAI,CAACM,IAAL,CAAU,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACzB,eAAOA,CAAC,CAACH,KAAF,GAAUE,CAAC,CAACF,KAAnB;AACD,OAFM,CAAP;AAGJ;;AACA,SAAK,cAAL;AACE,aAAOP,KAAK,CAACW,MAAN,CAAaV,MAAM,CAACX,OAApB,CAAP;;AACF,SAAK,gBAAL;AACE,aAAOW,MAAM,CAACX,OAAd;;AACF;AACE,aAAOU,KAAP;AAdJ;AAgBD,CAtBD;;AAwBA,eAAeD,eAAf","sourcesContent":["import anecdoteService from '../services/anecdotes'\n\n\n// 6.6: anekdootit, step4\nexport const increment = (content) => {\n  return async dispatch => {\n    const updatedAnecdote = await anecdoteService.update(content)\n    dispatch({\n      type: 'INCREMENT',\n      content: updatedAnecdote\n    })\n  }\n}\n\nexport const newAnecdote = (content) => {\n  return { type: 'NEW_ANECDOTE', content: content }\n}\n\n// 6.16 anekdootit ja backend, step4\nexport const initializeAnecdotes = () => {\n  return async dispatch => {\n    const anecdotes = await anecdoteService.getAll()\n    dispatch({\n      type: 'INIT_ANECDOTES',\n      content: anecdotes\n    })\n  }\n}\n\nconst anecdoteReducer = (state = [], action) => {\n  //console.log('state now: ', state)\n  //console.log('action', action)\n\n  let copy = [...state]\n\n  switch (action.type) {\n    // 6.3: anekdootit, step1\n    case 'INCREMENT':\n      let obj = copy.find(X => X.id == action.content.id)\n      if (obj) obj = obj.votes++\n        return copy.sort((a, b) => {\n          return b.votes - a.votes\n        })\n    // 6.4: anekdootit, step2\n    case 'NEW_ANECDOTE':\n      return state.concat(action.content)\n    case 'INIT_ANECDOTES':\n      return action.content\n    default:\n      return state\n  }\n}\n\nexport default anecdoteReducer"]},"metadata":{},"sourceType":"module"}