{"version":3,"sources":["components/Blog.js","components/BlogForm.js","components/LoginForm.js","services/users.js","components/CreateUser.js","components/login.js","services/blogs.js","services/login.js","Alarms/error.js","Alarms/success.js","App.js","index.js"],"names":["IsVisible","blog","addLike","deleteBlog","title","url","likes","className","onClick","id","NotVisible","Blog","useState","visible","setVisible","scope","author","BlogForm","props","onSubmit","addBlog","user","username","placeholder","value","onChange","target","setTitle","setUrl","type","handleLogout","LoginForm","handleLogin","htmlFor","name","setUsername","required","password","setPassword","setLogInVisible","baseUrl","create","newObject","a","axios","post","response","data","getAll","get","then","CreateUser","setName","handleCreate","e","preventDefault","newUser","usersService","r","console","log","an","setUsers","setSuccessMessage","setCreateVisible","setSuccess","setTimeout","setErrorMessage","setError","Login","token","config","headers","Authorization","update","put","setToken","newToken","destroy","delete","login","newObj","request","Error","error","message","role","Success","success","App","errorMessage","successMessage","blogs","setBlogs","setUser","users","logInVisible","createVisible","useEffect","blogService","loggedUserJSON","window","localStorage","getItem","JSON","parse","map","x","indexOf","loginService","setItem","stringify","currentUser","filter","u","newBlog","userID","location","reload","index","res","copyBlogs","confirm","removeItem","sorted","sort","b","sortByLikes","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c4b0884f.chunk.js","sourcesContent":["import React, { useState } from 'react'\n\n\nconst Blog = ({ blog, addLike, deleteBlog }) => {\n  const [visible, setVisible] = useState(false)\n\n  return (\n    <tr className=\"table-light\">\n      <th scope=\"row\" className=\"blog\">\n        {!visible\n          ? <NotVisible blog={blog}/>\n          : <IsVisible blog={blog} addLike={addLike} deleteBlog={deleteBlog}/>}\n      </th>\n      <td>{blog.author}</td>\n      <td>\n        <div\n          className=\"btn btn-primary\"\n          onClick={() => setVisible(!visible)}\n        >\n          {!visible ? 'Show' : 'Hide'}\n        </div>\n      </td>\n    </tr>\n  )}\n\nconst IsVisible = ({ blog, addLike, deleteBlog }) => (\n  <div>\n    {blog.title}\n    <br/>\n    {blog.url}\n    <br/>\n    Likes: <i>{blog.likes}</i>\n    <button\n      className=\"btn btn-info mx-3\"\n      onClick={() => addLike(blog.id)}>\n      Like\n    </button>\n    <br/>\n    <div\n      className=\"btn btn-danger my-3\"\n      onClick={() => deleteBlog(blog.id)}>\n      Delete blog\n    </div>\n  </div>\n)\n\nconst NotVisible = ({ blog }) => (\n  <div>\n    {blog.title}\n  </div>\n)\n\n\n\nexport default Blog","import React from 'react'\n\nconst BlogForm = (props) => (\n  <form className=\"container\" id=\"submitForm\" onSubmit={props.addBlog}>\n    <div className=\"row my-3\">{props.user.username} logged in</div>\n    <h2 className=\"row my-3\">Add your new blog here</h2>\n    <div className=\"row my-3\">\n      <label></label>\n      <input\n        id='inputTitle'\n        placeholder=\"Title\"\n        value={props.title}\n        onChange={({ target }) =>\n          props.setTitle(target.value)}\n      />\n    </div>\n    <div className=\"row my-3\">\n      <label></label>\n      <input\n        id='urlTitle'\n        placeholder=\"Url\"\n        value={props.url}\n        onChange={({ target }) =>\n          props.setUrl(target.value)}\n      />\n    </div>\n    <div className=\"row\">\n      <button className=\"btn btn-primary col\" type=\"submit\">save</button>\n      <div className=\"col-6\"></div>\n      <button className=\"btn btn-danger col\" onClick={() => props.handleLogout()}>Logout</button>\n    </div>\n  </form>\n)\n\nexport default BlogForm","import React from 'react'\n\nconst LoginForm = (props) => (\n  <form className=\"container\" onSubmit={props.handleLogin}>\n    <div className=\"row my-3\">\n      <h2>log in to application</h2>\n      <label htmlFor='username'></label>\n      <input\n        placeholder=\"username\"\n        id=\"username\"\n        type=\"text\"\n        name=\"username\"\n        value={props.username}\n        onChange={({ target }) =>\n          props.setUsername(target.value)}\n        required/>\n    </div>\n    <div className=\"row my-3\">\n      <label htmlFor='password'></label>\n      <input\n        placeholder=\"password\"\n        id=\"password\"\n        type=\"password\"\n        value={props.password}\n        name=\"password\"\n        onChange={({ target }) =>\n          props.setPassword(target.value)}\n        required/>\n    </div>\n    <div>\n      <input\n        className=\"btn btn-primary\"\n        type=\"submit\"\n        name=\"login\"\n        value=\"login\"\n      />\n      <button\n        className=\"btn btn-danger col mx-3\"\n        onClick={() => props.setLogInVisible(false)}>\n          Cancel\n      </button>\n    </div>\n  </form>\n)\n\nexport default LoginForm","import axios from 'axios'\nconst baseUrl = '/api/users'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async newObject => {\n  const response = await axios.post(baseUrl, newObject)\n  return response.data\n}\n\nexport default { create, getAll }\n","import React, { useState } from 'react'\nimport usersService from '../services/users'\n\nconst CreateUser = (props) => {\n\n  const [name, setName] = useState('')\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n\n  const handleCreate = async(e) => {\n    e.preventDefault()\n    let newUser = {\n      username: username,\n      password: password,\n      name: name\n    }\n    try {\n      const r = await usersService.create(newUser)\n      console.log(r)\n      const an = await usersService.getAll()\n      props.setUsers(an)\n      props.setSuccessMessage(`added new user: ${username}`)\n      props.setCreateVisible(false)\n      //window.location.reload()\n      props.setSuccess(true)\n      setTimeout(() => {\n        props.setSuccess(false)\n      }, 5000)\n    } catch (exception) {\n      props.setErrorMessage('Username already exists')\n      props.setError(true)\n      setTimeout(() => {\n        props.setError(false)\n      }, 5000)\n    }\n\n  }\n\n  return (\n    <form className=\"container\" onSubmit={handleCreate}>\n      <div className=\"row my-3\">\n        <h2>Create new user</h2>\n        <label htmlFor='name'></label>\n        <input\n          placeholder=\"name\"\n          id=\"name\"\n          type=\"text\"\n          name=\"name\"\n          value={name}\n          onChange={({ target }) =>\n            setName(target.value)}\n          required/>\n      </div>\n      <div className=\"row my-3\">\n        <label htmlFor='username'></label>\n        <input\n          placeholder=\"username\"\n          id=\"username\"\n          type=\"text\"\n          name=\"username\"\n          value={username}\n          onChange={({ target }) =>\n            setUsername(target.value)}\n          required/>\n      </div>\n      <div className=\"row my-3\">\n        <label htmlFor='password'></label>\n        <input\n          placeholder=\"password\"\n          id=\"password\"\n          type=\"password\"\n          value={password}\n          name=\"password\"\n          onChange={({ target }) =>\n            setPassword(target.value)}\n          required/>\n      </div>\n      <div>\n        <input\n          className=\"btn btn-primary\"\n          type=\"submit\"\n          name=\"create\"\n          value=\"create\"\n        />\n        <button\n          className=\"btn btn-danger col mx-3\"\n          onClick={() => props.setCreateVisible(false)}>\n            Cancel\n        </button>\n      </div>\n    </form>\n  )\n}\n\nexport default CreateUser","import React from 'react'\n\n\nconst Login = ({ setLogInVisible, setCreateVisible }) => (\n  <div className=\"container my-3\">\n    <button\n      className=\"btn btn-primary\"\n      onClick={() => setLogInVisible(true)}>\n            Login\n    </button>\n    <button\n      className=\"btn btn-success mx-3\"\n      onClick={() => setCreateVisible(true)}>\n            Create account\n    </button>\n  </div>\n)\n\nexport default Login","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async newObject => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst destroy = (id) => {\n  const config = {\n    headers: { Authorization: token },\n  }\n  const request = axios.delete(`${baseUrl}/${id}`, config)\n  return request.then(response => response.data)\n}\n\nexport default {\n  getAll,\n  create,\n  update,\n  setToken,\n  destroy\n}","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async newObj => {\n  const request = axios.post(`${baseUrl}`, newObj)\n  const response = await request\n  return response.data\n}\n\n\nexport default {\n  login: login\n}","import React from 'react'\n\n\nconst Error = ({ error, message }) => (\n  <div\n    className={`alert alert-danger my-3 ${error ? 'alert-shown' : 'alert-hidden'}`}\n    role=\"alert\">\n    {message}\n  </div>\n)\n\nexport default Error","import React from 'react'\n\n\nconst Success = ({ success, message }) => (\n  <div\n    className={`alert alert-success my-3 ${success ? 'alert-shown' : 'alert-hidden'}`}\n    role=\"alert\">\n    {message}\n  </div>\n)\n\nexport default Success","import React, { useState, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport BlogForm from './components/BlogForm'\nimport LoginForm from './components/LoginForm'\nimport CreateUser from './components/CreateUser'\nimport Login from './components/login'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport usersService from './services/users'\nimport Error from './Alarms/error'\nimport Success from './Alarms/success'\n\n\nconst App = () => {\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [successMessage, setSuccessMessage] = useState(null)\n  const [blogs, setBlogs] = useState([])\n  const [user, setUser] = useState(null)\n  const [users, setUsers] = useState([])\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [title, setTitle] = useState('')\n  const [url, setUrl] = useState('')\n  const [error, setError] = useState(false)\n  const [success, setSuccess] = useState(false)\n  const [logInVisible, setLogInVisible] = useState(false)\n  const [createVisible, setCreateVisible] = useState(false)\n\n\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs( blogs )\n    )\n    usersService.getAll().then(users =>\n      setUsers( users ))\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      blogService.setToken(user.token)\n    }\n  }, [])\n\n  const handleLogin = async (e) => {\n    e.preventDefault()\n    console.log('logging in with', username, password)\n    let authors = users.map(x => x.username)\n    if (authors.indexOf(username) === -1) {\n      setErrorMessage(`username ${username} doesn't exist`)\n      setError(true)\n      setTimeout(() => {\n        setError(false)\n      }, 5000)\n    } else {\n      try {\n        const r = await loginService.login({\n          username: username, password: password\n        })\n        window.localStorage.setItem(\n          'loggedBlogappUser', JSON.stringify(r)\n        )\n        blogService.setToken(r.token)\n        setUser(r)\n        setUsername('')\n        setPassword('')\n      } catch (exception) {\n        setErrorMessage('Login failed, wrong username or password')\n        setError(true)\n        setTimeout(() => {\n          setError(false)\n        }, 5000)\n      }\n    }\n  }\n\n  const handleLogout = () => {\n    window.localStorage.removeItem('loggedBlogappUser')\n    window.location.reload()\n  }\n\n  const addBlog = async(e) => {\n    e.preventDefault()\n    let currentUser = (users.filter(u => u.username === user.username))[0]\n    console.log(currentUser)\n    let newBlog =  {\n      title: title,\n      author: user.username,\n      url: url,\n      userID: currentUser.id\n    }\n    try {\n      await blogService.create(newBlog)\n      setSuccessMessage(`added new blog: ${title}, by: ${user.username}`)\n      setSuccess(true)\n      setTimeout(() => {\n        setSuccess(false)\n      }, 5000)\n      setTitle('')\n      setUrl('')\n      window.location.reload()\n    } catch (exception) {\n      setErrorMessage('Failed to add new blog')\n      setError(true)\n      setTimeout(() => {\n        setError(false)\n      }, 5000)\n    }\n  }\n\n  const addLike = async(id) => {\n    let index = blogs.map(x => x.id).indexOf(id)\n    console.log('index', index)\n    let newBlog = [...blogs][index]\n    console.log(newBlog)\n\n    newBlog.likes++\n    let res = await blogService.update(id, newBlog)\n    setBlogs(res)\n  }\n\n  const sortByLikes = () => {\n    let blogsCopy = [...blogs]\n    let sorted = blogsCopy.sort((a, b) => {\n      return b.likes - a.likes\n    })\n    console.log(sorted)\n    setBlogs(sorted)\n  }\n\n  const deleteBlog = async(id) => {\n    let copyBlogs = [...blogs]\n    let newBlog = copyBlogs.filter(blog => blog.id === id)\n    console.log('newBlog', newBlog[0])\n    try {\n      if (window.confirm(`do you want to delete blog ${newBlog[0].title} by ${newBlog[0].author}`)) {\n        await blogService.destroy(id)\n        window.location.reload()\n      }\n    } catch (exception) {\n      setErrorMessage('You are not authorized to delete this blog')\n      setError(true)\n      setTimeout(() => {\n        setError(false)\n      }, 5000)\n    }\n  }\n\n  return (\n    <div>\n      {user === null && logInVisible === true\n        ? <LoginForm\n          handleLogin={handleLogin}\n          setUsername={setUsername}\n          username={username}\n          setPassword={setPassword}\n          password={password}\n          setLogInVisible={setLogInVisible}/>\n        : user === null && logInVisible === false && createVisible === false\n          ? <Login\n            setLogInVisible={setLogInVisible}\n            setCreateVisible={setCreateVisible}/>\n          : user === null && createVisible === true\n            ? <CreateUser\n              setCreateVisible={setCreateVisible}\n              setSuccess={setSuccess}\n              setSuccessMessage={setSuccessMessage}\n              setError={setError}\n              setErrorMessage={setErrorMessage}\n              setUsers={setUsers}/>\n            : <BlogForm\n              addBlog={addBlog}\n              title={title}\n              setTitle={setTitle}\n              url={url}\n              setUrl={setUrl}\n              handleLogout={handleLogout}\n              user={user}/>\n      }\n      <div className='container'>\n        {error ? <Error error={error} message={errorMessage}/>\n          : success\n            ? <Success success={success} message={successMessage} />\n            : null}\n      </div>\n      <div className='container my-3'>\n        <h2>blogs</h2>\n        <table className='table table-striped'>\n          <thead>\n            <tr>\n              <th scope='col'>Title</th>\n              <th scope='col'>Author</th>\n              <th scope='col'>Info</th>\n            </tr>\n          </thead>\n          <tbody>\n            {blogs.map(blog =>\n              <Blog\n                key={blog.id}\n                blog={blog}\n                addLike={addLike}\n                deleteBlog={deleteBlog}/>\n            )}\n          </tbody>\n        </table>\n      </div>\n      <div className='container'>\n        <button\n          onClick={() => sortByLikes()}>\n          Sort by likes\n        </button>\n      </div>\n    </div>\n  )\n}\n\n\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}