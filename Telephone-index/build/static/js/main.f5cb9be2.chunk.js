(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{24:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(19),s=n.n(a),l=(n(24),n(10)),i=n(3),o=n(4),u=n.n(o),d=n(8),j=n(6),b=n.n(j),h="/api/persons",m={create:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a.post(h,t),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAll:function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.a.get(h),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),delPerson:function(e){return b.a.delete("".concat(h,"/").concat(e))},update:function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.a.put("".concat(h,"/").concat(t),n).catch((function(e){console.log(e)})),e.next=3,r;case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},f=n(0),p=function(e){var t=e.success;return Object(f.jsx)("div",{className:"alert alert-success my-3 ".concat(t?"alert-shown":"alert-hidden"),role:"alert",children:"Telephone number succesfully added!"})},O=function(e){var t=e.info;return Object(f.jsx)("div",{className:"alert alert-primary my-3 ".concat(t?"alert-shown":"alert-hidden"),role:"alert",children:"Telephone number changed"})},x=function(e){var t=e.warning;return Object(f.jsx)("div",{className:"alert alert-danger my-3 ".concat(t?"alert-shown":"alert-hidden"),role:"alert",children:"Telephone number deleted"})},v=function(e){var t=e.error;return Object(f.jsx)("div",{className:"alert alert-danger my-3 ".concat(t?"alert-shown":"alert-hidden"),role:"alert",children:"Telephone number have already been deleted"})},g=function(e){return Object(f.jsx)("form",{children:Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"filter",className:"my-3 sr-only"}),Object(f.jsx)("input",{type:"text",name:"filter",placeholder:"filter names",onChange:e.handleFilterChange,value:e.filter})]})})},w=function(e){return Object(f.jsxs)("form",{action:"api/persons",method:"post",onSubmit:e.handleSubmit,children:[Object(f.jsxs)("div",{className:"my-3",children:[Object(f.jsx)("label",{htmlFor:"text",className:"sr-only"}),Object(f.jsx)("input",{id:"text",type:"text",name:"text",placeholder:"name",onChange:e.handleNameChange,value:e.newName,required:!0})]}),Object(f.jsxs)("div",{className:"my-2",children:[Object(f.jsx)("label",{htmlFor:"tel",className:"sr-only"}),Object(f.jsx)("input",{id:"tel",type:"tel",name:"tel",placeholder:"telephone number",onChange:e.handleNumberChange,value:e.newNumber,required:!0})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",className:"btn btn-primary m-2",children:"add"})})]})},N=function(e){return Object(f.jsxs)("table",{className:"table table-striped",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{scope:"col",children:"#"}),Object(f.jsx)("th",{scope:"col",children:"Name"}),Object(f.jsx)("th",{scope:"col",children:"Number"}),Object(f.jsx)("th",{scope:"col",children:"Delete"})]})}),Object(f.jsx)("tbody",{children:e.filterNames.map((function(t){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{scope:"row",children:t.id}),Object(f.jsx)("td",{children:t.name}),Object(f.jsx)("td",{children:t.number}),Object(f.jsx)("td",{children:Object(f.jsx)("button",{className:"btn btn-outline-danger",onClick:function(){return e.deletePerson(t.id)},children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",className:"bi bi-x",viewBox:"0 0 16 16",children:Object(f.jsx)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})})})})]},t.id)}))})]})},y=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(i.a)(a,2),o=s[0],u=s[1],d=Object(r.useState)(""),j=Object(i.a)(d,2),b=j[0],h=j[1],y=Object(r.useState)(""),C=Object(i.a)(y,2),S=C[0],T=C[1],F=Object(r.useState)(!1),P=Object(i.a)(F,2),k=P[0],L=P[1],D=Object(r.useState)(!1),A=Object(i.a)(D,2),B=A[0],E=A[1],I=Object(r.useState)(!1),q=Object(i.a)(I,2),J=q[0],M=q[1],U=Object(r.useState)(!1),z=Object(i.a)(U,2),W=z[0],G=z[1];function H(){m.getAll().then((function(e){console.log("promise fulfilled"),c(e)}))}return Object(r.useEffect)((function(){H()}),[]),Object(f.jsxs)("div",{className:"container my-3",children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(g,{handleFilterChange:function(e){T(e.target.value)},filter:S}),B?Object(f.jsx)(p,{success:B,setSuccess:E}):k?Object(f.jsx)(x,{warning:k,setWarning:L}):J?Object(f.jsx)(O,{info:J,setInfo:M}):W?Object(f.jsx)(v,{error:W,setError:G}):"",Object(f.jsx)("h2",{className:"my-3",children:"Add new"}),Object(f.jsx)(w,{handleNameChange:function(e){u(e.target.value)},handleNumberChange:function(e){h(e.target.value)},handleSubmit:function(e){e.preventDefault();var t=Object(l.a)(n);if(t.map((function(e){return e.name})).includes(o)){var r=t.filter((function(e){return e.name===o}))[0];window.confirm("".concat(o," is already in the list. Do you want to assign new telephone number?"))&&m.update(r.id,{name:o,number:b,id:r.id}).then((function(e){console.log("updatedPerson: ",e),c(e),M(!0),setTimeout((function(){M(!1)}),2e3)})).catch((function(e){console.log(e)})).then((function(){H(),G(!0),setTimeout((function(){G(!1)}),2e3)}))}else if(!t.map((function(e){return e.name})).includes(o)){var a={name:o,number:b};m.create(a).then((function(e){c(t.concat(e))})).catch((function(e){console.log(e.response.data)})),E(!0),setTimeout((function(){E(!1)}),2e3)}},newName:o,newNumber:b}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(N,{filterNames:Object(l.a)(n).filter((function(e){return e.name.toUpperCase().includes(S.toUpperCase())})),deletePerson:function(e){var t=n.filter((function(t){return t.id===e}))[0];window.confirm("Delete ".concat(t.name))&&(m.delPerson(e).then((function(){return H()})),L(!0),setTimeout((function(){L(!1)}),2e3))}})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(y,{})}),document.getElementById("root")),C()}},[[45,1,2]]]);
//# sourceMappingURL=main.f5cb9be2.chunk.js.map